{
  "start": {
    "line": 12,
    "offset": 4
  },
  "end": {
    "line": 98,
    "offset": 1
  },
  "source": "hospital_service.bal",
  "description": "Tests an integration example of a hospital service",
  "flow": {
    "id": "1",
    "name": "doctor/<type>",
    "fileName": "hospital_service.bal",
    "bodyCodeLocation": {
      "start": {
        "line": 17,
        "offset": 75
      },
      "end": {
        "line": 97,
        "offset": 5
      }
    },
    "fileSourceRange": {
      "start": {
        "line": 0,
        "offset": 0
      },
      "end": {
        "line": 100,
        "offset": 97
      }
    },
    "endpoints": [
      {
        "name": "pineValleyEp",
        "baseUrl": "http://localhost:9091/pineValley/"
      },
      {
        "name": "grandOakEp",
        "baseUrl": "http://localhost:9092/grandOak/"
      }
    ],
    "nodes": [
      {
        "name": "switchDoctorType",
        "templateId": "SwitchNode",
        "codeLocation": {
          "start": {
            "line": 19,
            "offset": 8
          },
          "end": {
            "line": 32,
            "offset": 9
          }
        },
        "canvasPosition": {
          "x": 0,
          "y": 12
        },
        "inputPorts": [],
        "outputPorts": [
          {
            "id": "1",
            "type": "()",
            "receiver": "callGrandOak"
          },
          {
            "id": "2",
            "type": "()",
            "receiver": "callGrandOak"
          },
          {
            "id": "3",
            "type": "()",
            "receiver": "buildPineValleyPayload"
          }
        ],
        "properties": {
          "cases": [
            {
              "expression": "doctorType == \"ENT\" ",
              "nodes": [
                "1"
              ]
            }
          ],
          "defaultCase": {
            "nodes": [
              "2",
              "3"
            ]
          }
        }
      },
      {
        "name": "buildPineValleyPayload",
        "templateId": "CloneNode",
        "codeLocation": {
          "start": {
            "line": 34,
            "offset": 8
          },
          "end": {
            "line": 44,
            "offset": 9
          }
        },
        "canvasPosition": {
          "x": 11,
          "y": 25
        },
        "inputPorts": [
          {
            "id": "1",
            "type": "None",
            "sender": "switchDoctorType"
          }
        ],
        "outputPorts": [
          {
            "id": "2",
            "type": "PineValleyPayload",
            "name": "payload",
            "receiver": "callPineValley"
          }
        ]
      },
      {
        "name": "callPineValley",
        "templateId": "HttpRequestNode",
        "codeLocation": {
          "start": {
            "line": 46,
            "offset": 8
          },
          "end": {
            "line": 56,
            "offset": 9
          }
        },
        "canvasPosition": {
          "x": 25,
          "y": 32
        },
        "inputPorts": [
          {
            "id": "1",
            "type": "PineValleyPayload",
            "name": "payload",
            "sender": "buildPineValleyPayload"
          }
        ],
        "outputPorts": [
          {
            "id": "2",
            "type": "json",
            "name": "res",
            "receiver": "mergeResults"
          }
        ],
        "properties": {
          "outputType": "json",
          "action": "post",
          "path": "/doctors/",
          "endpoint": {
            "name": "pineValleyEp",
            "baseUrl": "http://localhost:9091/pineValley/"
          }
        }
      },
      {
        "name": "callGrandOak",
        "templateId": "HttpRequestNode",
        "codeLocation": {
          "start": {
            "line": 58,
            "offset": 8
          },
          "end": {
            "line": 68,
            "offset": 9
          }
        },
        "canvasPosition": {
          "x": 55,
          "y": 32
        },
        "inputPorts": [
          {
            "id": "1",
            "type": "None"
          }
        ],
        "outputPorts": [
          {
            "id": "2",
            "type": "json",
            "name": "res",
            "receiver": "mergeResults"
          }
        ],
        "properties": {
          "outputType": "json",
          "action": "get",
          "path": "\"/doctor/\" + doctorType",
          "endpoint": {
            "name": "grandOakEp",
            "baseUrl": "http://localhost:9092/grandOak/"
          }
        }
      },
      {
        "name": "mergeResults",
        "templateId": "TransformNode",
        "codeLocation": {
          "start": {
            "line": 70,
            "offset": 8
          },
          "end": {
            "line": 82,
            "offset": 9
          }
        },
        "canvasPosition": {
          "x": 60,
          "y": 80
        },
        "inputPorts": [
          {
            "id": "1",
            "type": "json",
            "name": "j1",
            "sender": "callPineValley"
          },
          {
            "id": "2",
            "type": "json",
            "name": "j2",
            "sender": "callGrandOak"
          }
        ],
        "outputPorts": [
          {
            "id": "3",
            "type": "json",
            "name": "res",
            "receiver": "respond"
          }
        ],
        "properties": {
          "outputType": "json|error",
          "expression": {
            "expression": "check transformFunction(j1, j2)",
            "codeLocation": {
              "start": {
                "line": 80,
                "offset": 23
              },
              "end": {
                "line": 80,
                "offset": 54
              }
            }
          },
          "transformFunctionLocation": {
            "start": {
              "line": 100,
              "offset": 0
            },
            "end": {
              "line": 100,
              "offset": 97
            }
          }
        }
      },
      {
        "name": "respond",
        "templateId": "CloneNode",
        "codeLocation": {
          "start": {
            "line": 84,
            "offset": 8
          },
          "end": {
            "line": 93,
            "offset": 9
          }
        },
        "canvasPosition": {
          "x": 88,
          "y": 98
        },
        "inputPorts": [
          {
            "id": "1",
            "type": "json",
            "name": "j",
            "sender": "mergeResults"
          }
        ],
        "outputPorts": [
          {
            "id": "2",
            "type": "json",
            "name": "j",
            "receiver": "function"
          }
        ]
      }
    ]
  }
}
